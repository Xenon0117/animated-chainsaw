# Fly.io configuration for Portfolio Application
app = "animated-chainsaw"
primary_region = "iad"

[build]
dockerfile = "Dockerfile"

[env]
# Environment variables for your app
PYTHONUNBUFFERED = "1"

[http_service]
internal_port = 8080
force_https = true
auto_stop_machines = true
auto_start_machines = true
min_machines_running = 1

[[services]]
protocol = "tcp"
internal_port = 8080
processes = ["app"]

  [services.concurrency]
  type = "connections"
  hard_limit = 25
  soft_limit = 20

[checks]
  [checks.alive]
  type = "http"
  interval = "30s"
  timeout = "5s"
  grace_period = "5s"
  method = "GET"
  path = "/"

[env]
PYTHONUNBUFFERED = "1"

# Set these in Fly.io secrets:
# fly secrets set DB_URI=your_postgres_uri
# fly secrets set FLASK_KEY=your_secret_key
# fly secrets set EMAIL=your_email
# fly secrets set PASS=your_password
